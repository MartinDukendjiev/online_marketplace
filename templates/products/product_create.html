{% extends 'base/base.html' %}

{% block content %}
    <h2>Добавяне на нов продукт</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {% if form.errors %}
            <strong>Please check:</strong>
            {% for field, errors in form.errors.items %}
                {% for error in errors %}
                    <div class="alert alert-primary" role="alert">
                        <p>{{ field|capfirst }}: {{ error }}</p>
                    </div>
                {% endfor %}
            {% endfor %}
        {% endif %}

        <div class="form-group">
            <label for="name">Име на продукта:</label>
            <input type="text" class="form-control" id="name" placeholder="Въведете име на продукта" name="name"
                   required>
        </div>
        <div class="form-group">
            <label for="description">Описание:</label>
            <textarea class="form-control" id="description" placeholder="Въведете описание на продукта"
                      name="description" required></textarea>
        </div>
        <div class="form-group">
            <label for="category">Категория:</label>
            <select class="form-control" id="category" name="category" required>
                {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
            </select>
        </div>
        {#        <div class="form-group">#}
        {#            <label for="subcategory">Подкатегория:</label>#}
        {#            <select class="form-control" id="subcategory" name="subcategory" required>#}
        {#                {% for subcategory in subcategories %}#}
        {#                    <option value="{{ subcategory.id }}">{{ subcategory.name }}</option>#}
        {#                {% endfor %}#}
        {#            </select>#}
        {#        </div>#}
        <div class="form-group">
            <label for="price">Цена:</label>
            <input type="number" step="0.01" class="form-control" id="price" placeholder="Въведете цена на продукта"
                   name="price" required>
        </div>
        <div class="form-group">
            <label for="phone_number">Телефонен номер:</label>
            <input type="text" class="form-control" id="phone_number" placeholder="Въведете телефонен номер"
                   name="phone_number" required>
        </div>
        <div class="form-group">
            <label for="location">Местоположение:</label>
            <input type="text" class="form-control" id="location" placeholder="Въведете местоположение" name="location"
                   required>
        </div>
        <div class="form-group">
            <label for="condition">Състояние:</label>
            <select class="form-control" id="condition" name="condition" required>
                <option value="New">Ново</option>
                <option value="Used">Употребявано</option>
            </select>
        </div>
        <div class="form-group">
            <label for="image">Снимки:</label>
            {{ formset.management_form }}
            {% for form in formset %}
                <div>
                    {{ form.image.label_tag }} {{ form.image }}
                    {% if form.instance.image %}
                        <img src="{{ form.instance.image.url }}" alt="{{ form.instance.image.name }}" width="100">
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        <button type="submit" class="btn btn-primary">Създай</button>
    </form>
{% endblock %}